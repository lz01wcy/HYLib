// Room: /d/huashan/luoyan.c

#include <room.h>
inherit ROOM;

void create()
{
        set("short", "è½é›å³°");
        set("long", @LONG
å—å³°åˆåè½é›å³°ï¼Œæ˜¯åŽå±±æœ€é«˜å³°.ä¼ è¯´äº”ä»£æ—¶å€™çš„éšå£«é™ˆæŠŸå°±éšå±…åœ¨è¿™é‡Œã€‚
å®‹å¤ªç¥–æ›¾ç»ä¸‹è¯å¾ä»–å‡ºå±±ä½œå®˜ï¼Œä»–ä¾¿åœ¨è¿™é‡Œå†™ä¸‹è°¢è¯è¡¨è¯´:"ä¸€ç‰‡é‡Žå¿ƒéƒ½è¢«
ç™½äº‘é”ä½ï¼Œä¹é‡å® è¯ä¼‘æ•™ä¸¹å‡¤è¡”æ¥"ï¼Œè¡¨ç¤ºä¸æ„¿å‡ºå±±åšå®˜ã€‚
LONG
        );
        set("exits", ([ /* sizeof() == 4 */
//         "southwsest" : __DIR__
        ]));
        set("no_clean_up", 0);
        set("outdoors", "huashan");
        setup();
}
void init(){
        object me;
        if( interactive( me = this_player()))
          remove_call_out("clone_check");
          call_out("clone_check", 2,me);

}
void clone_feng_qingyang(object me)
{
     object ob;

     if( environment(me) == this_object())
       if ( ((string)me->query("family/family_name")=="åŽå±±æ´¾") && 
          ((int)me->query("family/generation")==13) )
       {
         ob=new("/kungfu/class/huashan/feng-qingyang.c");
         ob->move(environment(me));
       }
}
void clone_check(object me)
{
        object *ob;
        int i,j;

        j=0;
        ob = all_inventory(environment(me));
   for(i=0; i<sizeof(ob); i++){
   if ( (!userp(ob[i]))
      && ((string)ob[i]->query("id")=="feng qingyang") )
      j=1;
   }
   if (j==0)
      call_out("clone_feng_qingyang",2,me);
}
