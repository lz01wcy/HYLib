#/clone/misc/mailbox.c
dbase (["no_get":1,"no_put":1,"unit":"个","long":"这是个人信箱，但信件内容对巫师无法保密，请勿谈及个人隐私：

mailto  <某人>            寄信给别人。
forward <信件编号> <某人> 将某封信转寄给别人。
from                      查看信箱中的信件。
read    <信件编号>        阅读某一封信件。
discard <信件编号>        丢弃一封信件。
","id":"mailbox","no_drop":1,"no_insert":1,"mails":({(["time":1021787687,"title":"about mudlist","text":"我是202.197.32.136 8888上的，想和你们这里做互连
同意吗？同意的话，请在我那里留个post
找happy or lost 都可以
thanks
","from":"激情(passion)","to":"hxsd",]),(["time":1037215770,"title":"我的sos行不行说句话好不？","text":"别这么不咸不淡的放着
知道你老人家在
","from":"大漠孤烟(dmgy)","to":"hxsd",]),(["time":1038195969,"title":"q","text":"q
","from":"刁钻古怪(marine)","to":"hxsd",]),(["time":1039116634,"title":"申请 wiz","text":"还记得我吧 hxsd 我给你去过信的 很不好意思 我早上没时间来
我想 你把题目告诉我吧  我做完了给你
","from":"天问(rzrz)","to":"hxsd",]),(["time":1052492223,"title":"can you teach me ??","text":"What is the problem, if the mud auto shutdown ??
some system file ??
can you teach me ?? please 
thanks a lot
bow
","from":"花J(kwok)","to":"hxsd",]),(["time":1053442707,"title":"关于web服务器","text":"用户：zmud
密码：lyf$guaf
","from":"刮风(guaf)","to":"hxsd",]),(["time":1062378697,"title":"关于TOM的问题想请教","text":"你好，HXSD，记得去年底有和你交流过，很久没有来了，是不是不记得有
我这号ID了？
TOM我昨天才要回的密码，看FINGER TOM的记录应该也是正确的，但密码
hp
丢失我觉得有点奇怪，你有改过吗？说真的，当初和你要密码好几回都没有
得到解决，我很失望，但我了解，象HY2这样的免费站点，并没有什么权利
和义务，所以我也不想去讲这些，只不过，感觉很不爽，没有办法。
如果你还是没看到，那就算了，玩不玩并不是很重要。
OK，就这样，你看到就麻烦你了！
","from":"欢乐(saqiu)","to":"hxsd",]),(["time":1077707455,"title":"sigh","text":"beg~~~。。。。。
能给我恢复吗？我等了1天了，好想玩的。。谢谢了。。。
","from":"小孬(qqppcsq)","to":"hxsd",]),(["time":1078198847,"title":"关于新增宝物描述","text":"hxsd，你好。
在这个mud我已经玩了有2年多。可以说，我是很清楚地目睹你如何将海洋支撑过来的。
很高兴你在不断地改进海洋。
sing2
但是现在很多东西都成了数字的累积。
东西的确是要实用，但是在实用的基础上要是增添了美观，那么是不是会吸引更多的人呢？
我不很懂写程序这些方面，但是是否可以让我尽一点力，写写这些只有名称，却无描述的宝物呢。
因为我觉得它们实在是太难看了。
不是只要戴上它们加了几点什么什么属性就够了的啊？
sing2
如果可以的话，请您将名单列给我，我会尽自己能力把描述写好。关于描述，装备时描述，卸下时描述。
然后如果可以让dhxy或者xyanhu加描述就更好了。
希望可以分担一点，也希望可以给我这个机会尽一点绵力吧。
谢谢。
当然这只是我一己之见，如果可以的话，那真是让我非常高兴的一件事。
","from":"鬼仆(guipu)","to":"hxsd",]),(["time":1078198847,"title":"关于新增宝物描述","text":"hxsd，你好。
在这个mud我已经玩了有2年多。可以说，我是很清楚地目睹你如何将海洋支撑过来的。
很高兴你在不断地改进海洋。
sing2
但是现在很多东西都成了数字的累积。
东西的确是要实用，但是在实用的基础上要是增添了美观，那么是不是会吸引更多的人呢？
我不很懂写程序这些方面，但是是否可以让我尽一点力，写写这些只有名称，却无描述的宝物呢。
因为我觉得它们实在是太难看了。
不是只要戴上它们加了几点什么什么属性就够了的啊？
sing2
如果可以的话，请您将名单列给我，我会尽自己能力把描述写好。关于描述，装备时描述，卸下时描述。
然后如果可以让dhxy或者xyanhu加描述就更好了。
希望可以分担一点，也希望可以给我这个机会尽一点绵力吧。
谢谢。
当然这只是我一己之见，如果可以的话，那真是让我非常高兴的一件事。
","from":"鬼仆(guipu)/转寄自鬼仆/转寄自北京","to":"hxsd",]),(["time":1084709218,"title":"你好 我想改名","text":"你好 我是台湾的玩家
注册时因为转码的问题 我的名是奇德
转成了一个我不懂的字 现在我的名字因为拜少林的关系
一个字正常一个不正常
希望巫师能帮帮忙把我的名字改成清德 谢谢你了

你如果不信我是台湾来的 可以查我的来源 都是台湾的中华电信
","from":"清_(kydd)","to":"hxsd",]),(["time":1087745031,"title":"to hxsd或其他主事的老大","text":"to hxsd或其他主事的老大;我们以前是开侠客英雄之浪迹天涯，开了５年，现在我们的mud几乎没人玩了;服务器情况我简略说下吧;CPU: P4 1.6G;Memory: 1G;SCSI hard disk: 20G;Speed: 100M~500M;系统是win2000 server;电信代管，提供FTP,但不提供远程登陆，可提供管理员联系方式;现在开着个书剑的mud，可惜没人玩了;ip是61.153.224.52 port是5556;你们可以上去看看;如果你们有意拿去开海洋就给你们开吧;我的邮箱是shakey1981@126.com ;不管你们怎么决定请给我个消息，谢谢
","from":"申请(shenqing)","to":"hxsd",]),(["time":1099633338,"title":"人物编辑器2","text":"//身上物品
        inv = all_inventory(env);
        for(i=0; i<sizeof(inv); i++) {
                if ( !inv[i]->query_temp(\"check_only\") ){
                        //衣服
                        if(inv[i]->query(\"equipped\")==\"worn\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wear();\\n\";
                        }
                        //装备
                        if(inv[i]->query(\"equipped\")==\"wielded\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wield();\\n\";
                        }

                }
        }
        str += \"}\\n\";
//      write (str);
        write(\"请输入新档名: \"); 
        input_to(\"save_room_file\",str); 
        return 1; 
}
int do_saveobj(string arg) 
{ 
        object env,*inv; 
        string str, *name1,username,changtime, file1,file,age1;
        mapping prop;
        mixed *thistime;
        int i; 
//        if( !arg || sscanf(arg, \"%d\",age1)!=1 ) 
//                return notify_fail(\"指令格式：saveobj <重量>\\n\"); 

        env = present(\"npc1\",this_player()); 
        if(!env)
                return notify_fail(\"找不到指定人物\\n\"); 
        file1 = base_name(env) + \".c\"; 
//water()
        username=this_player()->query(\"name\")+\"(\"+this_player()->query(\"id\")+\")\";
        thistime=localtime(time());
        changtime=sprintf(\"公元：%d年%d月%d日，北京时间：%d时%d分%d秒。\",
               thistime[LT_YEAR],thistime[LT_MON]+1,thistime[LT_MDAY],
               thistime[LT_HOUR],thistime[LT_MIN],thistime[LT_SEC]);    

        str = \"// NPC: \" + file1 
              + \"\\n// Data: \"+ username 
              + \"\\n// Time: \"+ changtime
              +  @OBJ_CODE 
 
 
inherit NPC; 
#include <ansi.h> 
void create() 
{ 
OBJ_CODE 
        ; 
        str += sprintf(\"\\tset_name(\\\"%s\\\", ({\\\"%s\\\"}));\\n\", env->query(\"name\"),env->query(\"id\")); 
        str += sprintf(\"\\tset(\\\"long\\\", @LONG\\n%s\\nLONG\\n\\t);\\n\", env->query(\"long\") ); 
        prop = env->query_entire_dbase(); 
        name1 = keys(prop); 
        for(i=0; i<sizeof(name1); i++) { 
                if( member_array(name1[i], special_props)!=-1 ) continue;
                if(name1[i]==\"default_actions\") continue;
                if(name1[i]==\"actions\") continue;
                if(prop[name1[i]]==\"人类\") continue;
                if(name1[i]==\"id\") continue;
                if(name1[i]==\"eff_qi\") continue;
                if(name1[i]==\"max_jing\") continue;
                if(name1[i]==\"eff_jing\") continue;
                if(name1[i]==\"jing\") continue;
                if(name1[i]==\"max_qi\") continue;
                if(name1[i]==\"pighead\") continue;
                if(prop[name1[i]]==0) continue;
                str += sprintf(\"\\tset(\\\"%s\\\", %O);\\n\", name1[i], prop[name1[i]] ); 
        } 

//拷贝武功
        prop = env->query_skills();
        if(!sizeof(prop)) {
        }else{
                name1 = keys(prop); 
                for(i=0; i<sizeof(name1); i++) { 
                        if( member_array(name1[i], special_props)!=-1 ) continue; 
                        str += sprintf(\"\\tset_skill(\\\"%s\\\", %O);\\t\\t//\"+to_chinese(name1[i])+\"\\n\", name1[i], prop[name1[i]] ); 
                }
            }
        str += \"\\n\\tsetup();\\n\"; 
//身上物品
        inv = all_inventory(env);
        for(i=0; i<sizeof(inv); i++) {
                if ( !inv[i]->query_temp(\"check_only\") ){
                        //衣服
                        if(inv[i]->query(\"equipped\")==\"worn\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wear();\\n\";
                        }
                        //装备
                        if(inv[i]->query(\"equipped\")==\"wielded\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wield();\\n\";
                        }

                }
        }
        str += \"}\\n\";
//      write (str);
        write(\"请输入新档名: \"); 
        input_to(\"save_room_file\",str); 
        return 1; 
} 
 
int save_room_file(string file,string str) 
{ 
//        object ob; 
        file = resolve_path(this_player()->query(\"cwd\"), file) + \".c\"; 
 
//      if( wizardp(environment()) ) { 
//        ob=present(\"npc1\",this_player()); 
//              seteuid(getuid(environment())); 
//      seteuid(getuid(ob)); 
 
//      if( strlen(yn)<1 || yn[0]!='y' ) return 1; 
        rm(file); 
        printf(str); 
        write(\"存档 \" + file + \"....\");
        if( write_file(file, str) ) {
                write(\"Ok.\\n\");
                return 1;
        } else
                return notify_fail(\"你没有写入这个档案(\" + file + \")的权利。\\n\");

}
 
void owner_is_killed() { destruct(this_object()); } 
 


","from":"钉子宝宝(dingzichat)","to":"hxsd",]),(["time":1171364728,"title":"thill密码","text":"821102
","from":"千山(thill)","to":"hxsd",]),}),"owner_id":"hxsd","name":"某人的信箱","no_beg":1,"no_steal":1,])
mails ({(["time":1021787687,"title":"about mudlist","text":"我是202.197.32.136 8888上的，想和你们这里做互连
同意吗？同意的话，请在我那里留个post
找happy or lost 都可以
thanks
","from":"激情(passion)","to":"hxsd",]),(["time":1037215770,"title":"我的sos行不行说句话好不？","text":"别这么不咸不淡的放着
知道你老人家在
","from":"大漠孤烟(dmgy)","to":"hxsd",]),(["time":1038195969,"title":"q","text":"q
","from":"刁钻古怪(marine)","to":"hxsd",]),(["time":1039116634,"title":"申请 wiz","text":"还记得我吧 hxsd 我给你去过信的 很不好意思 我早上没时间来
我想 你把题目告诉我吧  我做完了给你
","from":"天问(rzrz)","to":"hxsd",]),(["time":1052492223,"title":"can you teach me ??","text":"What is the problem, if the mud auto shutdown ??
some system file ??
can you teach me ?? please 
thanks a lot
bow
","from":"花J(kwok)","to":"hxsd",]),(["time":1053442707,"title":"关于web服务器","text":"用户：zmud
密码：lyf$guaf
","from":"刮风(guaf)","to":"hxsd",]),(["time":1062378697,"title":"关于TOM的问题想请教","text":"你好，HXSD，记得去年底有和你交流过，很久没有来了，是不是不记得有
我这号ID了？
TOM我昨天才要回的密码，看FINGER TOM的记录应该也是正确的，但密码
hp
丢失我觉得有点奇怪，你有改过吗？说真的，当初和你要密码好几回都没有
得到解决，我很失望，但我了解，象HY2这样的免费站点，并没有什么权利
和义务，所以我也不想去讲这些，只不过，感觉很不爽，没有办法。
如果你还是没看到，那就算了，玩不玩并不是很重要。
OK，就这样，你看到就麻烦你了！
","from":"欢乐(saqiu)","to":"hxsd",]),(["time":1077707455,"title":"sigh","text":"beg~~~。。。。。
能给我恢复吗？我等了1天了，好想玩的。。谢谢了。。。
","from":"小孬(qqppcsq)","to":"hxsd",]),(["time":1078198847,"title":"关于新增宝物描述","text":"hxsd，你好。
在这个mud我已经玩了有2年多。可以说，我是很清楚地目睹你如何将海洋支撑过来的。
很高兴你在不断地改进海洋。
sing2
但是现在很多东西都成了数字的累积。
东西的确是要实用，但是在实用的基础上要是增添了美观，那么是不是会吸引更多的人呢？
我不很懂写程序这些方面，但是是否可以让我尽一点力，写写这些只有名称，却无描述的宝物呢。
因为我觉得它们实在是太难看了。
不是只要戴上它们加了几点什么什么属性就够了的啊？
sing2
如果可以的话，请您将名单列给我，我会尽自己能力把描述写好。关于描述，装备时描述，卸下时描述。
然后如果可以让dhxy或者xyanhu加描述就更好了。
希望可以分担一点，也希望可以给我这个机会尽一点绵力吧。
谢谢。
当然这只是我一己之见，如果可以的话，那真是让我非常高兴的一件事。
","from":"鬼仆(guipu)","to":"hxsd",]),(["time":1078198847,"title":"关于新增宝物描述","text":"hxsd，你好。
在这个mud我已经玩了有2年多。可以说，我是很清楚地目睹你如何将海洋支撑过来的。
很高兴你在不断地改进海洋。
sing2
但是现在很多东西都成了数字的累积。
东西的确是要实用，但是在实用的基础上要是增添了美观，那么是不是会吸引更多的人呢？
我不很懂写程序这些方面，但是是否可以让我尽一点力，写写这些只有名称，却无描述的宝物呢。
因为我觉得它们实在是太难看了。
不是只要戴上它们加了几点什么什么属性就够了的啊？
sing2
如果可以的话，请您将名单列给我，我会尽自己能力把描述写好。关于描述，装备时描述，卸下时描述。
然后如果可以让dhxy或者xyanhu加描述就更好了。
希望可以分担一点，也希望可以给我这个机会尽一点绵力吧。
谢谢。
当然这只是我一己之见，如果可以的话，那真是让我非常高兴的一件事。
","from":"鬼仆(guipu)/转寄自鬼仆/转寄自北京","to":"hxsd",]),(["time":1084709218,"title":"你好 我想改名","text":"你好 我是台湾的玩家
注册时因为转码的问题 我的名是奇德
转成了一个我不懂的字 现在我的名字因为拜少林的关系
一个字正常一个不正常
希望巫师能帮帮忙把我的名字改成清德 谢谢你了

你如果不信我是台湾来的 可以查我的来源 都是台湾的中华电信
","from":"清_(kydd)","to":"hxsd",]),(["time":1087745031,"title":"to hxsd或其他主事的老大","text":"to hxsd或其他主事的老大;我们以前是开侠客英雄之浪迹天涯，开了５年，现在我们的mud几乎没人玩了;服务器情况我简略说下吧;CPU: P4 1.6G;Memory: 1G;SCSI hard disk: 20G;Speed: 100M~500M;系统是win2000 server;电信代管，提供FTP,但不提供远程登陆，可提供管理员联系方式;现在开着个书剑的mud，可惜没人玩了;ip是61.153.224.52 port是5556;你们可以上去看看;如果你们有意拿去开海洋就给你们开吧;我的邮箱是shakey1981@126.com ;不管你们怎么决定请给我个消息，谢谢
","from":"申请(shenqing)","to":"hxsd",]),(["time":1099633338,"title":"人物编辑器2","text":"//身上物品
        inv = all_inventory(env);
        for(i=0; i<sizeof(inv); i++) {
                if ( !inv[i]->query_temp(\"check_only\") ){
                        //衣服
                        if(inv[i]->query(\"equipped\")==\"worn\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wear();\\n\";
                        }
                        //装备
                        if(inv[i]->query(\"equipped\")==\"wielded\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wield();\\n\";
                        }

                }
        }
        str += \"}\\n\";
//      write (str);
        write(\"请输入新档名: \"); 
        input_to(\"save_room_file\",str); 
        return 1; 
}
int do_saveobj(string arg) 
{ 
        object env,*inv; 
        string str, *name1,username,changtime, file1,file,age1;
        mapping prop;
        mixed *thistime;
        int i; 
//        if( !arg || sscanf(arg, \"%d\",age1)!=1 ) 
//                return notify_fail(\"指令格式：saveobj <重量>\\n\"); 

        env = present(\"npc1\",this_player()); 
        if(!env)
                return notify_fail(\"找不到指定人物\\n\"); 
        file1 = base_name(env) + \".c\"; 
//water()
        username=this_player()->query(\"name\")+\"(\"+this_player()->query(\"id\")+\")\";
        thistime=localtime(time());
        changtime=sprintf(\"公元：%d年%d月%d日，北京时间：%d时%d分%d秒。\",
               thistime[LT_YEAR],thistime[LT_MON]+1,thistime[LT_MDAY],
               thistime[LT_HOUR],thistime[LT_MIN],thistime[LT_SEC]);    

        str = \"// NPC: \" + file1 
              + \"\\n// Data: \"+ username 
              + \"\\n// Time: \"+ changtime
              +  @OBJ_CODE 
 
 
inherit NPC; 
#include <ansi.h> 
void create() 
{ 
OBJ_CODE 
        ; 
        str += sprintf(\"\\tset_name(\\\"%s\\\", ({\\\"%s\\\"}));\\n\", env->query(\"name\"),env->query(\"id\")); 
        str += sprintf(\"\\tset(\\\"long\\\", @LONG\\n%s\\nLONG\\n\\t);\\n\", env->query(\"long\") ); 
        prop = env->query_entire_dbase(); 
        name1 = keys(prop); 
        for(i=0; i<sizeof(name1); i++) { 
                if( member_array(name1[i], special_props)!=-1 ) continue;
                if(name1[i]==\"default_actions\") continue;
                if(name1[i]==\"actions\") continue;
                if(prop[name1[i]]==\"人类\") continue;
                if(name1[i]==\"id\") continue;
                if(name1[i]==\"eff_qi\") continue;
                if(name1[i]==\"max_jing\") continue;
                if(name1[i]==\"eff_jing\") continue;
                if(name1[i]==\"jing\") continue;
                if(name1[i]==\"max_qi\") continue;
                if(name1[i]==\"pighead\") continue;
                if(prop[name1[i]]==0) continue;
                str += sprintf(\"\\tset(\\\"%s\\\", %O);\\n\", name1[i], prop[name1[i]] ); 
        } 

//拷贝武功
        prop = env->query_skills();
        if(!sizeof(prop)) {
        }else{
                name1 = keys(prop); 
                for(i=0; i<sizeof(name1); i++) { 
                        if( member_array(name1[i], special_props)!=-1 ) continue; 
                        str += sprintf(\"\\tset_skill(\\\"%s\\\", %O);\\t\\t//\"+to_chinese(name1[i])+\"\\n\", name1[i], prop[name1[i]] ); 
                }
            }
        str += \"\\n\\tsetup();\\n\"; 
//身上物品
        inv = all_inventory(env);
        for(i=0; i<sizeof(inv); i++) {
                if ( !inv[i]->query_temp(\"check_only\") ){
                        //衣服
                        if(inv[i]->query(\"equipped\")==\"worn\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wear();\\n\";
                        }
                        //装备
                        if(inv[i]->query(\"equipped\")==\"wielded\"){
                                str += \"\\tcarry_object(\\\"\"+base_name(inv[i])+\"\\\")->wield();\\n\";
                        }

                }
        }
        str += \"}\\n\";
//      write (str);
        write(\"请输入新档名: \"); 
        input_to(\"save_room_file\",str); 
        return 1; 
} 
 
int save_room_file(string file,string str) 
{ 
//        object ob; 
        file = resolve_path(this_player()->query(\"cwd\"), file) + \".c\"; 
 
//      if( wizardp(environment()) ) { 
//        ob=present(\"npc1\",this_player()); 
//              seteuid(getuid(environment())); 
//      seteuid(getuid(ob)); 
 
//      if( strlen(yn)<1 || yn[0]!='y' ) return 1; 
        rm(file); 
        printf(str); 
        write(\"存档 \" + file + \"....\");
        if( write_file(file, str) ) {
                write(\"Ok.\\n\");
                return 1;
        } else
                return notify_fail(\"你没有写入这个档案(\" + file + \")的权利。\\n\");

}
 
void owner_is_killed() { destruct(this_object()); } 
 


","from":"钉子宝宝(dingzichat)","to":"hxsd",]),(["time":1171364728,"title":"thill密码","text":"821102
","from":"千山(thill)","to":"hxsd",]),})
